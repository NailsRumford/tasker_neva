{% extends 'base.html' %}
{% block sidebarMenu %}
  {% include 'technicians/includes/sidebarMenu.html' %}
{% endblock sidebarMenu %}
{% load thumbnail %}
{% block content %}
<div class="container">
  <p>
  <div class="container">
    <div class="row row-cols-1">
      <button class="btn btn-info btn-sm p-1 m-1 w-100" type="button" data-bs-toggle="collapse" data-bs-target="#collapseMap" aria-expanded="false" aria-controls="collapseMap">
        Карта
      </button>
      <div class="collapse" id="collapseMap">
          {% include 'technicians/includes/map.html' %}
      </div>
    </div>
    <div class="row row-cols-2">
      <div class="col">
        <a href="{% url 'technicians:fire_alarm_objects' days_left_in_month%}" class="btn btn-secondary btn-sm p-1 m-1 w-100">до конца месяца</a>
      </div>
      <div class="col">
        <a href="{% url 'technicians:fire_alarm_objects' 3 %}" class="btn btn-danger btn-sm p-1 m-1 w-100">менее 3 дней</a>
      </div>
      <div class="col">
        <a href="{% url 'technicians:fire_alarm_objects' 6 %}" class="btn btn-warning btn-sm p-1 m-1 w-100">менее 6 дней</a>
      </div>
      <div class="col">
        <a href="{% url 'technicians:fire_alarm_objects' 9 %}" class="btn btn-primary btn-sm p-1 m-1 w-100">менее 9 дней</a>
      </div>
    </div>
    <div class="row row-cols-1">
      <div class="col">
        <a href="{% url 'technicians:index' %}" class="btn btn-success btn-sm p-1 m-1 w-100">Все объекты</a>
      </div>
    </div>
  </div>
  <p>
  <p>
  <p>
    <div class="accordion accordion-flush" id="accordionObjectFireAlarm">
      {% for object in objects %}
      <div class="accordion-item">
        <h2 class="accordion-header " id="flush-heading{{object.id}}" >
          <button class="accordion-button collapsed " type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapse{{object.id}}" aria-expanded="false" aria-controls="flush-collapse{{object.id}}" style="background-color: #F5F5F5;">
            <div class='container'>
              <p><h6>Объект:</h6> {{ object.name }}</p>
              <p><h6>Адресс объекта:</h6> {{ object.address }}</p>
            </div>
          </button>
        </h2>
        <div id="flush-collapse{{object.id}}" class="accordion-collapse collapse" aria-labelledby="flush-heading{{object.id}}" data-bs-parent="#accordionObjectFireAlarm">
          <div class="accordion-body">
            {% if object.photo %}
            {% thumbnail object.photo "250x250" crop="center" upscale=True as im %}
              <a href="{{ object.photo.url }}"><img class="card-img my-2" src="{{ im.url }}"></a>
            {% endthumbnail %}
            {% endif %}
            <div class = 'row'>
              <div class='container'>
                <p class="card-text"><h6>Обслуживающая организация:</h6> {{ object.service_organizations }}</p>
                <p class="card-text"><h6>Переодичность:</h6> {{ object.frequency }}</p>
                <p class="card-text"><h6>Произвести обслуживания до:</h6> {{ object.next_service_date }}</p>
              </div>
              <div class="d-grid gap-3">
                <a href="{% url 'technicians:fire_alarm_object_service_create' object.id %}" class="btn btn-success btn-sm">Сделать обслуживать</a>
                <a href="{% url 'technicians:failed_service_create' object.id %}" class="btn btn-danger btn-sm">Обслуживание невозможно</a>
                <a href="{% url 'technicians:fire_alarm_object_service_detail' object.id %}" class="btn btn-primary btn-sm">Карточка объекта</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
{% endblock content %}


